這份新計劃的 Power Apps 架構 核心目標是「極簡化」與「自動化連動」，將原本複雜的導航結構改造成四階段線性導覽。透過全域變數鎖定「棟別、樓層、工項」，讓現場同仁在進入地圖後，系統已完全知曉其查驗環境。
以下是建議的新架構設計：
一、 四階段畫面流程 (UI/UX Structure)
1. Screen_Building_Select (棟別選擇)
●	功能：首頁即是選擇專案棟別。
●	控制項：垂直圖庫 (Gallery)，顯示 L1 清單中不重複的棟別名稱 。
●	動作邏輯：點選後執行 Set(gvarSelectedBuild, ThisItem.Value); Navigate(Screen_Floor_Select)。
2. Screen_Floor_Select (樓層選擇)
●	功能：根據所選棟別，列出該棟所有樓層。
●	控制項：垂直圖庫 (Gallery)，資料來源為 Filter('L1', 棟別 = gvarSelectedBuild) 。
●	動作邏輯：點選後執行 Set(gvarSelectedFloor, ThisItem.Value); Navigate(Screen_WorkItem_Summary)。
3. Screen_WorkItem_Summary (工項摘要)
●	功能：顯示該樓層各工項的「缺失健康度」。
●	控制項：Gallery 顯示 L2 工項目錄 。
●	關鍵邏輯：在每個工項旁顯示統計標籤，計算該樓層在對應 L3x 清單中的待改善件數 。
●	動作邏輯：點選「木門」後，執行 Set(gvarTargetList, "L3a"); Set(gvarWorkItemName, "木門"); Navigate(Screen_Map_View)。
4. Screen_Map_View (地圖落點)
●	功能：在平面圖上進行選點查驗。
●	核心組件：
○	img_Map_Base：根據變數從 L0 抓取對應樓層圖面 。
○	gal_Fixed_Pins：讀取 L1b 預設座標，疊加在地圖上 。
○	燈號邏輯：利用 Lookup 檢查 gvarTargetList 中該點位是否有紀錄。有待改善缺失顯 紅色，已完工顯 綠色，無紀錄顯 半透明灰色 。
●	動作邏輯：點擊點位後設定 gvarSelectedPin 並彈出簡易表單 。
________________________________________
二、 全域變數管理 (Variable Engine)
為了維持「簡單」，系統將依賴以下核心變數進行跨頁面傳遞：
●	gvarSelectedBuild / gvarSelectedFloor：鎖定目前的施工位置。
●	gvarTargetList：動態決定存檔對象（例如：點選木門時為 'L3a - 木門檢查紀錄'，點選油漆時變更為 'L3b - 油漆檢查紀錄'） 。
●	gvarSelectedPointID：紀錄目前點擊的是 L1b 的哪一個固定位置，確保資料正確關聯。
________________________________________
三、 查驗與驗收邏輯 (Action Logic)
捨棄原本複雜的 Screen_Add 與 Screen_View 分開模式，改採 「彈跳式智慧表單 (Popup Form)」：
1.	新增缺失：點選灰色點位 -> 彈窗顯示 Form_Add -> 系統自動鎖定座標與工項 -> 拍照存檔 。
2.	快速驗收：點選紅色點位 -> 彈窗顯示 Form_Audit -> 同仁上傳改善照片 -> 系統自動將狀態改為「修繕完成」並關閉彈窗 。
3.	自動化存檔：利用 OnSuccess 重置變數，確保同仁在地圖上可以連續作業而不需要頻繁換頁 。
________________________________________
四、 系統開發優點總結
●	效能極佳：前三頁僅讀取輕量的目錄清單（L1, L2），只有在地圖頁才會載入查驗數據 。
●	維護容易：若未來增加新工項（例如 L3c），只需複製 L3a 清單並在第三頁增加一個導航按鈕，不需要重寫地圖邏輯 。
●	防呆設計：使用固定點位制，現場人員只需「點擊圓圈」，徹底杜絕隨意點擊產生的座標偏誤 。











